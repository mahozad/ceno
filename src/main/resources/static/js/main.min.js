"use strict";var $body=$("body"),$pagePrompt=$(".page-prompt"),themeColor=$("html").css("--primary-color");enableCSSAnimations(),showCookieConsentMessage();function showCookieConsentMessage(){localStorage.isCookieConsentMessageShown||showPrompt("Ceno uses cookies to provide the best browsing experience for you"),localStorage.isCookieConsentMessageShown=!1}function enableCSSAnimations(){$body.removeClass("preload")}function showPrompt(a){0<$pagePrompt.length&&$pagePrompt.remove();var b="<div class=\"page-prompt\">\n             <div class=\"page-prompt-text\">".concat(a,"</div>\n         </div>");$("main").prepend(b)}var closeBtn=$(".close"),loginDialog=$("#login-dialog"),loginWrapper=$("#login-wrapper"),registerWrapper=$("#register-wrapper");$("#log-in").on("click touch",function(){return showModal(loginWrapper,registerWrapper)}),$("#sign-up").on("click touch",function(){return showModal(registerWrapper,loginWrapper)});function showModal(a,b){b.hide(),loginDialog.show(),a.slideDown(350)}$(window).add(closeBtn).click(function(a){(a.target===loginDialog[0]||a.target===closeBtn[0])&&loginDialog.fadeOut(200,function(){registerWrapper.hide(),loginWrapper.hide(),emptyInput(usernameInput),emptyInput(passwordInput),emptyInput(usernameInputLogin),emptyInput(passwordInputLogin)})});function emptyInput(a){a.val(""),a.siblings(".highlight").hide().css({background:themeColor}),a.siblings(".prompt").hide()}$(".log-prompt").on("click touch",function(){$(".log-form>div").animate({height:"toggle",opacity:"toggle"},450)}),$(".wrt-comment button").on("click touch",function(){var a=$(this).siblings("input").val(),b=$(this).siblings("textarea"),c=b.val(),d=$(".usr-name").text();0===c.length||$.post("/posts/comments/add",{postId:a,comment:c},function(){var a=$(".comments p");a.text(function(a,b){return"Comments (".concat(+b.match(/\d+/)+1,"):")}),a.after("<div class=\"comment\">\n                     <div class=\"comment-author\">\n                         <img src=\"/users/avatars/".concat(d,"\" alt=\"").concat(d,"\">\n                         <div class=\"com-auth-name\">").concat(d,"</div>\n                     </div>\n                     <div class=\"comment-text\">").concat(c,"</div>\n                 </div>")),b.val(""),$(".comm-count span").text(function(a,b){return+b+1})})});var sliceNumber=1,hasNext=!0;if($(location).attr("pathname").match("^/categories")){var category=$(location).attr("pathname").replace("/categories/","");$(window).scroll(function(){hasNext&&$(window).scrollTop()+$(window).height()>$(document).height()-50&&($.get("/categories/".concat(category,"/slice"),{sliceNumber:sliceNumber},function(a){""===a&&($("#spinner").hide(),hasNext=!1),$(".card:last-child").after(a)}),sliceNumber++)})}$(".avatar-upload input").on("change",function(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){return $(".avatar-upload img").attr("src",a.target.result)},a.readAsDataURL(this.files[0])}}),$(".post-file input").on("change",function(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){return $(".file-prev").attr("src",a.target.result)},a.readAsDataURL(this.files[0])}}),$body.on("click touch",".heart",function(){var a=$(this).siblings(".like-num"),b=$(this).parents(".card,.article-container").attr("data-post-id");$(this).hasClass("liked")?($(this).toggleClass("liked not-liked"),$(this).removeClass("animating"),like(b,!1,a,-1)):($(this).addClass("animating"),like(b,!0,a,1))});function like(a,b,c,d){$.post("/posts/like",{postId:a,like:b},function(){c.text(+c.text()+d)})}$body.on("animationend",".heart",function(){$(this).toggleClass("not-liked liked")}),$(".hamburger-icon").on("click touch",function(){$(".side-nav").css({width:"240px",maxWidth:"100%"})}),$(".close-cat").on("click touch",function(){return $(".side-nav").css({width:"0"})}),$body.on("click touch",".share-icon",function(){var a=$(this).next();"visible"===a.css("visibility")?($(this).css({fill:"#919da5"}),a.css({opacity:"0",visibility:"hidden",transform:"translate(-20px, 0)"})):($(this).css({fill:themeColor}),a.css({opacity:"1",visibility:"visible",transform:"translate(-20px, 10px)"}))}),$(window).click(function(a){"svg"!==a.target.tagName&&"path"!==a.target.tagName&&$(".share-content").each(function(){$(this).is(":visible")&&($(this).siblings(".share-icon").css({fill:"#919da5"}),$(this).css({opacity:"0",visibility:"hidden",transform:"translate(-20px, 0)"}))})});var usernameInput=$(".register-form input[name=username]"),passwordInput=$(".register-form input[name=password]"),passRegex=/.*/;$(".flat-inp").focus(function(){var a=$(this).val();""===a&&$(this).siblings(".highlight").fadeTo(180,1)});function checkUserName(a,b){$.post("/users/check-username",{name:a},function(a){a?(b.css({background:"#de1e26"}).fadeTo(200,1),usernameInput.siblings(".prompt").text("Already taken").fadeTo(200,1)):(b.css({background:"#4CAF50"}).fadeTo(200,1),usernameInput.siblings(".prompt").fadeTo(200,0))})}usernameInput.blur(function(){var a=usernameInput.val(),b=usernameInput.siblings(".highlight");""===a?(b.fadeTo(200,0,function(){return b.css({background:themeColor})}),usernameInput.siblings(".prompt").fadeTo(200,0)):checkUserName(a,b)}),passwordInput.blur(function(){var a=passwordInput.val(),b=passwordInput.siblings(".highlight");0===a.length?(b.fadeTo(180,0,function(){return b.css({background:themeColor})}),passwordInput.siblings(".prompt").fadeTo(200,0)):6>a.length||!passRegex.test(a)?(b.css({background:"#de1e26"}).fadeTo(200,1),passwordInput.siblings(".prompt").text("".concat(6>a.length?"Too short":"Invalid")).fadeTo(200,1)):(b.css({background:"#4CAF50"}).fadeTo(200,1),passwordInput.siblings(".prompt").fadeTo(200,0))}),$(".register-form").submit(function(){var a=!0,b=usernameInput.val(),c=passwordInput.val(),d=usernameInput.siblings(".highlight"),e=passwordInput.siblings(".highlight");return 0===b.length&&(d.css({background:"#de1e26"}).fadeTo(200,1),usernameInput.siblings(".prompt").text("Required").fadeTo(200,1),a=!1),0===c.length?(e.css({background:"#de1e26"}).fadeTo(200,1),passwordInput.siblings(".prompt").text("Required").fadeTo(200,1),a=!1):!passRegex.test(c)&&(e.css({background:"#de1e26"}).fadeTo(200,1),passwordInput.siblings(".prompt").text("Invalid").fadeTo(200,1),a=!1),a});var csrfHeader=$("meta[name=\"_csrf_header\"]").attr("content"),csrfToken=$("meta[name=\"_csrf\"]").attr("content");$(document).ajaxSend(function(a,b){return b.setRequestHeader(csrfHeader,csrfToken)});var usernameInputLogin=$(".login-form .input:nth-child(1) input"),passwordInputLogin=$(".login-form .input:nth-child(2) input");usernameInputLogin.on("blur",function(){var a=usernameInputLogin.val(),b=usernameInputLogin.siblings(".highlight");0===a.length&&(b.fadeTo(200,0,function(){return b.css({background:themeColor})}),usernameInputLogin.siblings(".prompt").fadeTo(200,0))}),passwordInputLogin.on("blur",function(){var a=passwordInputLogin.val(),b=passwordInputLogin.siblings(".highlight");0===a.length&&(b.fadeTo(200,0,function(){return b.css({background:themeColor})}),passwordInputLogin.siblings(".prompt").fadeTo(200,0))}),$(".login-form button").on("click touch",function(){var a=!0,b=usernameInputLogin.val(),c=passwordInputLogin.val(),d=$("input[name=remember-me]").prop("checked"),e=usernameInputLogin.siblings(".highlight"),f=passwordInputLogin.siblings(".highlight");0===b.length&&(e.css({background:"#de1e26"}).fadeTo(200,1),usernameInputLogin.siblings(".prompt").text("Required").fadeTo(200,1),a=!1),0===c.length&&(f.css({background:"#de1e26"}).fadeTo(200,1),passwordInputLogin.siblings(".prompt").text("Required").fadeTo(200,1),a=!1),a&&$.post("/login",{username:b,password:c,rememberMe:d},function(a){a?location.reload():$(".invalid-login").fadeTo(200,1)})}),$(".logout").on("click touch",function(){$(this).parent().submit()}),$body.on("click touch",".ply-btn",function(){$(this).toggleClass("active");var a=$(this).siblings("video")[0],b=$(this);a.paused?(a.play(),setTimeout(function(){b.is(":hover")||b.fadeTo(200,0)},1e3)):(a.pause(),$(this).fadeTo(80,1))}),$body.on("mouseover",".ply-btn",function(){$(this).fadeTo(60,1)}),$body.on("mouseleave",".ply-btn",function(){$(this).fadeTo(60,1);var a=$(this),b=$(this).siblings("video")[0];b.paused||setTimeout(function(){a.is(":hover")||a.fadeTo(80,0)},300)}),document.addEventListener("timeupdate",function(a){var b=$(a.target),c=b.siblings("progress"),d=100*(b[0].currentTime/b[0].duration);c.stop().animate({value:d},0===d?100:400)},!0),$("#post-submit").submit(function(){var a=!0;return $(".input-np").each(function(){var b=$(this).find("input, textarea").val();if(0===b.length){var c=$(this).find(".highlight-np");c.css({background:"#de1e26"}).fadeTo(200,1),$(this).find(".prompt").fadeTo(200,1),a=!1}}),a}),$(".input-np").on("change",function(){var a=$(this).find("input, textarea").val();if(0!==a.length){var b=$(this).find(".highlight-np");b.fadeTo(200,0),$(this).find(".prompt").fadeTo(200,0)}}),$(".actions form").submit(function(){return!$(this).find("svg").hasClass("disabled")}),$(".chng-cats-icon").on("click touch",function(){var a=$(".usr-name").text();if(a){var b=$(this).next();"visible"===b.css("visibility")?($(this).css({fill:"#919da5"}),b.css({opacity:"0",visibility:"hidden",transform:"translate(-20px, 0)"})):($(this).css({fill:themeColor}),b.css({opacity:"1",visibility:"visible",transform:"translate(-20px, 10px)"}))}}),$(".cat-del-ico").on("click touch",function(){var a=$(".article-container").attr("data-post-id"),b=$(this).siblings(".changeable-cat").text(),c=$(this).parent();$.post("/categories/delete",{postId:a,catName:b},function(){return c.remove()})}),$(".cat-add-ico").on("click touch",function(){var a=$(".article-container").attr("data-post-id"),b=$(".cat-add-inp").val();$.post("/categories/add",{postId:a,catName:b},function(){$(".cat-del:last-of-type").after("<a class=\"cat-del\">\n                     <div class=\"changeable-cat chip\">".concat(b,"</div>\n                     <div class=\"cat-del-ico\">&times;</div>\n                 </a>"))})}),$(".lang").on("click touch",function(){var a=new URLSearchParams(window.location.search),b=$(this).data("lang-name");a.set("lang",b),location.replace("?".concat(a.toString()))}),$(".theme-container").on("click touch",function(){var a=new URLSearchParams(window.location.search),b=$(this).data("theme-name");a.set("theme",b),location.replace("?".concat(a.toString()))}),$(document).ready(function(){var a=$("nav .usr-name").text();if(0!==a.length){var b=new EventSource("/likes/".concat(a,"/stream"));b.onmessage=function(a){var b=JSON.parse(a.data);showPrompt("One of your posts was ".concat(b.message))}}});

//# sourceMappingURL=main.min.js.map